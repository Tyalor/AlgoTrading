{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OptionsScanner - A Simple Filter for Options Contracts</title>
    <!-- Links -->
    <link href="https://cdn.datatables.net/v/dt/dt-1.13.8/datatables.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">

    <!-- Styles -->
    <style>
    </style>

    <!-- Scripts -->
    <script defer src="https://cdn.datatables.net/v/dt/dt-1.13.8/datatables.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script defer>
        if ( window.history.replaceState ) {
            window.history.replaceState( null, null, window.location.href );
        }
    </script>
    <script defer>
    $(document).ready(function() {
        $('table[id^="calls-table-"], table[id^="puts-table-"]').DataTable({
            "paging": true,
            "pageLength": 10 // Set the number of records per page
        });
    });
    </script>
</head>
<body class="bg-dark text-white">
    <div class="container py-4">
        <div class="logo-container">
            <img src="{% static 'img/logo-alt.png' %}" alt="OptionsScanner-Logo" class="logo">
        </div>
        <h3 class="text-center">Please Enter Options Filter Settings</h3>
        <!-- <p class="text-center mb-4">Limited to 15 Contracts per Expiration Date</p> -->
        {% if error_message %}
        <div class="alert alert-danger">{{ error_message }}</div>
        {% endif %}
        <form action="" method="post" class="mb-5 bg-dark p-4 text-white rounded">
            {% csrf_token %}
            <div class="row mb-3">
                <div class="col-12">
                    <label for="tickers" class="form-label">Tickers (separated by commas)*:</label>
                    <input type="text" id="tickers" name="tickers" class="form-control bg-secondary text-white">
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="start_date" class="form-label">Start Date (YYYY-MM-DD)*:</label>
                    <input type="date" id="start_date" name="start_date" class="form-control bg-secondary text-white" value="{{ start_date }}">
                </div>
                <div class="col-md-6">
                    <label for="end_date" class="form-label">End Date (YYYY-MM-DD)*:</label>
                    <input type="date" id="end_date" name="end_date" class="form-control bg-secondary text-white" value="{{ end_date }}">
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="min_price" class="form-label">Minimum Option Price*:</label>
                    <input type="number" id="min_price" name="min_price" step="0.01" class="form-control bg-secondary text-white">
                </div>
                <div class="col-md-6">
                    <label for="max_price" class="form-label">Maximum Option Price*:</label>
                    <input type="number" id="max_price" name="max_price" step="0.01" class="form-control bg-secondary text-white">
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="min_volume" class="form-label">Minimum Volume:</label>
                    <input type="number" id="min_volume" name="min_volume" class="form-control bg-secondary text-white">
                </div>
                <div class="col-md-6">
                    <label for="min_open_interest" class="form-label">Minimum Open Interest:</label>
                    <input type="number" id="min_open_interest" name="min_open_interest" class="form-control bg-secondary text-white">
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="std_dev_filter" class="form-label">Standard Deviation Filter (1-3):</label>
                    <input type="number" id="std_dev_filter" name="std_dev_filter" step="1" min="1" max="3" class="form-control bg-secondary text-white">
                </div>
                <div class="col-md-6 d-flex align-items-end">
                    <input type="submit" value="Submit" class="btn btn-primary w-100">
                </div>
            </div>
        </form>

        {% include 'options_app/results.html' %}

</body>
</html>